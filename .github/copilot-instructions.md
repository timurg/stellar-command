# Copilot Instructions for `stellar-command`

## Архитектура и основные компоненты
- Проект — Unity-игра, основной код в папке `Assets/Scripts/`
- Главные сущности: `Ship` (корабль, абстрактный класс), `Weapon`, `Entity`, менеджеры (`StarFieldManager`, `StarLayerController`)
- Корабли реализуют движение, стрельбу, выбор цели, состояние (патруль, атака, возврат и др.) через наследование от `Ship`
- Оружие (`Weapon`) управляется через список в каждом корабле, стрельба вызывается методом `ShootAtTarget`
- Взаимодействие между объектами через компоненты Unity и ссылки на объекты (`Entity target`, трансформы)

## Важные паттерны и соглашения
- Все основные игровые объекты — MonoBehaviour, используют сериализацию Unity (`[SerializeField]`)
- Для движения и ротации кораблей используется физика Rigidbody2D, ротация реализована через Slerp к целевому углу
- Коллизии между кораблями игнорируются через метод `IgnoreShipCollisions` (см. `Ship.cs`)
- Состояния корабля (`ShipState`) управляются через методы `GetState`/`SetState`, с дополнительной логикой при смене состояния
- Оружие добавляется через инспектор или кодом, стрельба реализована циклом по списку оружия

## Сборка, тестирование, отладка
- Сборка и запуск — стандартные для Unity: используйте Unity Editor (`.sln`, `.csproj` для IDE)
- Логирование — через `Debug.Log`, ошибки и важные события выводятся в консоль Unity
- Для отладки поведения кораблей и коллизий используйте логи из методов типа `IgnoreShipCollisions`
- Тесты не обнаружены, используйте Play Mode для ручной проверки

## Внешние зависимости и интеграции
- Используется стандартный Unity API (Rigidbody2D, Collider2D, MonoBehaviour)
- В проекте нет специфических внешних библиотек, кроме стандартных Unity пакетов

## Примеры ключевых файлов
- `Assets/Scripts/Core/Ship.cs` — паттерны движения, ротации, стрельбы, состояния
- `Assets/Scripts/Core/Weapon.cs` — управление стрельбой (если есть)
- `Assets/Scripts/Core/Entity.cs` — базовая логика для игровых объектов
- Менеджеры: `StarFieldManager.cs`, `StarLayerController.cs` — управление слоями и эффектами

## Рекомендации для AI-агентов
- Следуйте паттернам сериализации и компонентной архитектуры Unity
- Для новых сущностей наследуйте от `Entity` или `Ship`, реализуйте абстрактные методы
- При добавлении оружия или новых состояний — обновляйте соответствующие методы и перечисления
- Для взаимодействия между объектами используйте ссылки на компоненты и трансформы
- Все изменения должны быть совместимы с Unity Editor и не нарушать сериализацию

---

_Обновите этот файл при изменении архитектуры или появлении новых паттернов. Для уточнения — обратитесь к владельцу проекта._
